@model Learnera.Models.RegisterViewModel
@*@section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
        @ViewBag.Title = "Register";
    }*@
@{

    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>ViewAllFriends</title>
    <link href="~/Content/signup.css" rel="stylesheet" />

    
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @Styles.Render("~/Content/css")
    @Styles.Render("~/Content/signup.css")

    <script>
        //GLOBAL VARIABLES
        var table = "";
        var ime = "";
        var prezime = "";
        var email = "";
        var pasvord = "";
        var confirm = "";
        var odbranipredmeti = [];
        var model1 = [];

        var Subject = "";
        var Profesor = "";

        function firstNextButtonClicked() {
            ime = $("#inputName").val();
            prezime = $("#inputSurname").val();
            email = $("#inputEmail").val()
            pasvord = $("#inputPassword").val()
            confirm = $("#inputCpassword").val()

            $('#page1').removeClass('bg-primary');
            $('#page1').removeClass('active');
            $('#page1').addClass('disabled');

            $('#page2').addClass('bg-primary');
            $('#page2').addClass('active');
            $('#page2').removeClass('disabled');

            $('#stepOne').hide();
            $('#stepTwo').show();


            table = $("#myTable").DataTable();

        };
        function secondNextButtonClicked() {
            //GET ALL SELECTED SUBJECTS

            $('#myTable input:checkbox:checked').each(function () {
                var rowId = $(this).parents("tr").children('td')
                var subject = rowId[1].innerText
                var profesor = rowId[2].innerText
                odbranipredmeti.push({ "Name": subject, "Professor": profesor });
            });

            $('#sub_mission_list tr').each(function () {
                var describe = $(this).find('textarea').val();
                console.log(describe);
            });


           
            $.ajax({
                url: "/Account/Register",
                method: "POST",
                data: {
                    model: { Name: ime, Surname: prezime, Email: email, Password: pasvord, ConfirmPassword: confirm, subjects: odbranipredmeti }
                },
                success: function (data) {
                    odbranipredmeti = [];
                    $("html").html(data);
                }
            });

        };

        function fistBackButtonClicked() {
            $('#page1').addClass('bg-primary');
            $('#page1').addClass('active');
            $('#page1').removeClass('disabled');

            $('#page2').removeClass('bg-primary');
            $('#page2').removeClass('active')
            $('#page2').addClass('disabled');

            $('#stepOne').show();
            $('#stepTwo').hide();
        };

        $(document).ready(function () {
            $('#stepOne').show();
            $('#stepTwo').hide();
            $('#myTable').load('/Subjects/GetSubjects');
        });

    </script>

</head>
<body>


    <div class="container" id="container" style="height: 100vh; ">
        <div class="row justify-content-center align-content-center">
            <div class="col-lg-8 col-xl-8   col-sm-12 col-md-12 text-white">

                <div class="card card-signin my-5">

                    <div class="card-body">
                        <div class="container">
                            <div class="col-12">
                                <div class="row d-flex justify-content-center">
                                    <ul class="list-group list-group-horizontal">
                                        <li class="list-group-item bg-primary active" id="page1">Step 1</li>
                                        <li class="list-group-item disabled" id="page2">Step 2</li>
                                    </ul>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <h3 class="card-title text-center font-weight-bold m-0">Sign up!</h3>
                                        <p class=" text-center  small  mb-4">Lorem ipsum dolor sit amet.</p>
                                    </div>
                                </div>
                            </div>


                            <!--Step ONE-->
                            <div id="stepOne" class="container">
                                <div class="row">
                                    <div class="col-6">
                                        <div class="form-label-group">
                                            <input type="text" id="inputName" class="form-control" placeholder="Name"
                                                   required autofocus>
                                            <label for="inputName">Name*</label>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="form-label-group">
                                            <input type="text" id="inputSurname" class="form-control"
                                                   placeholder="Surname" required autofocus>
                                            <label for="inputSurname">Surname*</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <div class="form-label-group">
                                            <input type="email" id="inputEmail" class="form-control btn-block"
                                                   placeholder="Email address" required autofocus>
                                            <label for="inputEmail">Email address*</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <div class="form-label-group">
                                            <input type="password" id="inputPassword" class="form-control" placeholder="Password*"
                                                   required autofocus>
                                            <label for="inputPassword">Password*</label>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="form-label-group">
                                            <input type="password" id="inputCpassword" class="form-control"
                                                   placeholder="Confirm Password*" required autofocus>
                                            <label for="inputCpassword">Confirm Password*</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row justify-content-end">
                                    <button class="btn btn-md  btn-light mr-3 text-uppercase " onclick="firstNextButtonClicked();" type="submit">Continue <b></b>></button>
                                </div>
                            </div>
                            <!--/Step ONE-->
                            <!--Step TWO-->
                            <div id="stepTwo" class="container">
                                <div class="row">
                                    <div class="col-12">
                                        

                                            <table class="table" id="myTable"></table>

                                        
                                        <div class="row">
                                            <div class="col-5">
                                                <button class="btn btn-md   btn-outline-light mr-3 text-uppercase "
                                                        onclick="fistBackButtonClicked();" type="submit">
                                                    <b>< </b>Back
                                                </button>
                                            </div>
                                            <div class="col-7 d-flex justify-content-end">
                                                <input type="submit" onclick="secondNextButtonClicked();" class="btn btn-default" value="Register" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--/Step TWO-->

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>


